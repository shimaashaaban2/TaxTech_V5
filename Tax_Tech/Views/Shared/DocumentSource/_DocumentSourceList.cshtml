@model  Tax_Tech.ApiModels.RootModel

@{

    //int count = 0;
    //int totalPages = (int)Math.Ceiling((double)Model.totalCount / 50);
    int pageSize = 50;
    int totalPages = (int)Math.Ceiling((double)Model.totalCount / pageSize);

    // Controller should set this (or read from query string/localStorage)
    int currentPage = ViewBag.CurrentPage ?? 1;

    int maxPagesToShow = 10;

    // Calculate page block
    int startPage = ((currentPage - 1) / maxPagesToShow) * maxPagesToShow + 1;
    int endPage = Math.Min(startPage + maxPagesToShow - 1, totalPages);

}

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
    $(document).ready(function () {
        // Get saved page number from localStorage, default to 1
        var pageNo = parseInt(localStorage.getItem("pageNo")) || 1;
        var pageSize = 50; // you can change this

        // Starting row number based on page
        var startNo = (pageNo - 1) * pageSize;

        // Loop through table rows and update numbering
        //$("#thebasic-datatable tbody tr").each(function (index) {
        //    var rowNo = startNo + index + 1;
        //    $(this).find("td:first").text(rowNo);
        //});

        // Debug
        console.log("Current page:", pageNo, "Start count:", startNo + 1);
    });
</script>

<table class="table  table-striped table-responsive table-bordered" id="thebasic-datatable">
    <thead>
        <tr>
            <th  width="10%">Vendor Name</th>
            <th  width="10%">Document Type</th>
            <th  width="10%">Date Time Issued</th>
            <th width="10%">Internal ID</th>
            <th  width="10%">Entity Title</th>
            <th  width="10%">Source</th>
            <th  width="10%">Net Total</th>
            <th  width="10%">Tax Totals</th>
            <th  width="10%">Total Amount</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.totalCount == 0)
        {
            <tr>
                <td colspan="10">
                    <h5 class="text-center">@Tax_Tech.Resources.Resource.NoDataAvailable</h5>
                </td>
            </tr>
        }
        <!-- Razor-generated rows -->
        @foreach (var item in Model.docs)
        {
            <tr>
                <td width="10%">@item.VendorName</td>
                <td width="10%"> @item.DocumentType</td>
                <td width="10%">@item.DateTimeIssued</td>
                <td width="10%">@item.InternalID</td>
                <td width="10%">@item.EntityTitle</td>
                <td width="10%">@item.Source</td>
                <td width="10%">@item.NetTotal</td>
                <td width="10%">@item.TaxTotals</td>
                <td width="10%">@item.TotalAmount</td>
            </tr>
        }
    </tbody>
</table>






<ul class="pagination mt-2" id="pagination-controls">

    @* Previous block *@
    @if (startPage > 1)
    {
        <li class="page-item">
            <a class="page-link" href="javascript:void(0)" onclick="DocumentSourceList(@(startPage - 1))">« Prev</a>
        </li>
    }

    @* Page numbers *@
    @for (var i = startPage; i <= endPage; i++)
    {
        <li class="page-item @(i == currentPage ? "active" : "")">
            <a class="page-link" href="javascript:void(0)" onclick="DocumentSourceList(@i)">@i</a>
        </li>
    }

    @* Next block *@
    @if (endPage < totalPages)
    {
        <li class="page-item">
            <a class="page-link" href="javascript:void(0)" onclick="DocumentSourceList(@(endPage + 1))">Next »</a>
        </li>
    }
</ul>
   

@*</nav>
            </div>
        </div>
    </div>*@